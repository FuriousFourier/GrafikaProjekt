<html>
  <head>
    <title>Wymodelowanie uproszczonej wersji mechanizmu, np. ruchomego modelu silnika t≈Çokowego</title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <script src="lib/jquery-1.9.1/jquery-1.9.1.js"></script>
      <script src="lib/three.js.r58/three.js"></script>
      <script src="lib/requestAnimationFrame/RequestAnimationFrame.js"></script>
      <script src="lib/gl-matrix/gl-matrix.js"></script>
  </head>
  <body>

    <canvas id="webglcanvas" style="border: none;" width="500" height="500" background="red"></canvas>

    <script type="text/javascript">
        var renderer = null,
            scene = null,
            camera = null,
            myTime = Date.now(),
            period = 5000,
            tmp = 0,
            objects = {};

        function animate() {
            dummyRotation(objects);
        }

        function dummyRotation(solids) {
            for (var key in solids) {
                solids[key].rotation.z = (Date.now() - myTime) / period * 2 * Math.PI;
                solids[key].rotation.y = (Date.now() - myTime) / period * 2 * Math.PI / 2;
            }
        }

        function doThings() {
            requestAnimationFrame(function() { doThings(); });
            renderer.render( scene, camera );

            animate();

        }

        $(document).ready(
            function() {

                var canvas = document.getElementById("webglcanvas");
                renderer = new THREE.WebGLRenderer( { canvas: canvas, antialias: true } );
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setClearColor(0xDED5D0, 1);
                scene = new THREE.Scene();
                camera = new THREE.PerspectiveCamera( 45, canvas.width / canvas.height, 1, 4000 );
                scene.add(camera);
                camera.position.z = 5;
                camera.position.y = 1;
                camera.rotation.x = -5 * Math.PI / 180;

                document.body.appendChild(renderer.domElement);

                var textureFile = "images/foo.jpg";
                var texture = THREE.ImageUtils.loadTexture(textureFile);

                // create a point light
                var light = new THREE.PointLight();
                light.position.x = 0;
                light.position.y = 0;
                light.position.z = 10;
                scene.add(light);

                var cylinderGeometry = new THREE.CylinderGeometry(.4, .4, 1, 32, 0, false, 0, Math.PI);
                var material = new THREE.MeshPhongMaterial({color: 0xffeedd, side: THREE.DoubleSide, map: texture});
                objects["cylinder"] = new THREE.Mesh(cylinderGeometry, material);

                for (var key in objects) {
                    scene.add(objects[key]);
                }
                doThings();
            }
        );

    </script>
  </body>
</html>
